(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"0bec":function(t,e,r){"use strict";var i=r("3791"),n=r.n(i);n.a},"1bef":function(t,e,r){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("2f62"),s=o(r("4dc3"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(){r.e("components/tabControl-tag/tabControl-tag").then(function(){return resolve(r("7bbc"))}.bind(null,r)).catch(r.oe)},h=function(){r.e("components/uni-popup/uni-popup").then(function(){return resolve(r("5814"))}.bind(null,r)).catch(r.oe)},l=function(){r.e("components/sib-list/sib-list").then(function(){return resolve(r("8e9d"))}.bind(null,r)).catch(r.oe)},f={components:{tabControl:c,uniPopup:h,sibList:l},computed:u({},(0,n.mapState)(["userInfo","orderTitle"])),data:function(){return{current:0,credit_current:0,credit_num:0,order_current:0,order_num:0,credit_list:"",credit_type:0,order_list:"",order_q:0,order_details:"",m:!1,order_id:"",plan:0,u_share:0,c_share:0,popup:0,noData:0,share:0,share_index:0,page:1,scrollTop:0,old:{scrollTop:0},n:0,d:""}},onLoad:function(e){var r=this;t.getSystemInfo({success:function(t){r.Height=t.screenHeight-400+"px"}}),this.request.httpRequest("api/apply/nav","GET").then((function(e){1e3===e.data.code?(r.credit_list=e.data.retval,r.order_list=e.data.retval[r.credit_current].child):t.showToast({title:e.data.msg,icon:"none"})}));var i={mode:this.current,type:this.credit_type,q:this.order_q,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",i,"GET").then((function(t){r.order_details=t.data.retval,r.order_details<1?r.noData=1:r.noData=0}))},watch:{current:function(t,e){var r=this;this.current=t,this.$refs.sibList.toTopClick(),this.credit_type=0,this.credit_current=0,this.order_current=0,this.order_q=0,this.n=0,1==t?(this.u_share=1,this.plan=3,this.u_share=3):(this.plan=0,this.u_share=0);var i={mode:t,type:this.credit_type,q:this.order_q,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",i,"GET").then((function(t){r.order_details=t.data.retval,r.order_details<1?r.noData=1:r.noData=0}))},credit_current:function(e,r){var i=this;this.$refs.sibList.toTopClick(),this.c_share=e,this.credit_type=this.credit_list[e].type,this.order_current=0,this.order_q=0,this.n=0,0==this.current?(this.plan=1==e||2==e||3==e?1:0,this.u_share=0):(this.u_share=3,this.plan=3);var n={mode:this.current,type:this.credit_type,q:this.order_q,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",n,"GET").then((function(t){i.order_details=t.data.retval,i.order_details<1?i.noData=1:i.noData=0})),this.request.httpRequest("api/apply/nav","GET").then((function(r){1e3===r.data.code?i.order_list=r.data.retval[e].child:t.showToast({title:r.data.msg,icon:"none"})}))},order_current:function(t,e){var r=this;this.$refs.sibList.toTopClick(),this.order_q=this.order_list[t].q,this.n=0;var i={mode:this.current,type:this.credit_type,q:this.order_q,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",i,"GET").then((function(t){if(6==r.order_q){r.plan=3,r.u_share=3;for(var e=0;e<t.data.retval.length;e++)1==t.data.retval[e].is_deleted&&(t.data.retval[e].status="已删除订单")}else 1==r.current?(r.u_share=3,r.plan=3):(r.plan=0,r.u_share=0);r.order_details=t.data.retval,r.order_details<1?r.noData=1:r.noData=0}))}},methods:u({lower:function(e){var r=this;this.page=this.page+1;var i={mode:this.current,type:this.credit_type,q:this.order_q,pageNo:this.page,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",i,"GET").then((function(e){if(!r.n){t.showLoading({title:"加载中...",mask:!0});var i=e.data.retval;e.data.retval.length<1?(r.n=1,t.showToast({icon:"none",title:"没有消息了"})):(r.n=0,t.showToast({icon:"success",title:"加载成功"})),r.order_details=r.order_details.concat(i),t.hideLoading()}}))},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},goTop:function(t){this.scrollTop=this.old.scrollTop,this.$nextTick((function(){this.scrollTop=0}))},Uorder:function(){this.current=0},Torder:function(){this.current=1},credit:function(t){this.credit_current!==t&&(this.credit_current=t)},order:function(t){this.order_current!==t&&(this.order_current=t)},Plan:function(e){1!=e?t.navigateTo({url:"../checkprogress/checkprogress?url="+encodeURIComponent(JSON.stringify(e))}):this.popup=1},close:function(){this.$refs.popup.close()},del:function(){var e=this;this.$refs.popup.close();var r={id:this.order_id,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/delete",r,"GET").then((function(r){t.showToast({title:r.data.msg,icon:"none"});var i={mode:e.current,type:e.credit_type,q:e.order_q,user_id:e.userInfo.user_id,token:e.userInfo.token,sign:(0,s.default)(e.userInfo.user_id+e.userInfo.token)};e.request.httpRequest("api/apply/index",i,"GET").then((function(t){e.order_details=t.data.retval,e.order_details<1?e.noData=1:e.noData=0}))}))},toDelete:function(t){this.order_id=t,this.$refs.popup.open()},toShare:function(t){var e,r=this,i={mode:this.current,type:this.credit_type,q:this.order_q,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",i,"GET").then((function(i){r.order_details=i.data.retval,e=r.order_details[t].link_href,1!=e?(r.share=1,r.share_index=t):1==e&&(r.popup=1),r.order_details<1?r.noData=1:r.noData=0}))},shareCancel:function(){this.share=0},shareWeixin:function(){t.share({provider:"weixin",scene:"WXSceneSession",type:0,href:this.order_details[this.share_index].link_href,title:this.order_details[this.share_index].realname+"邀请您查询"+this.order_details[this.share_index].name+"办卡进度",imageUrl:this.order_details[this.share_index].thumb,summary:this.order_details[this.share_index].realname+"邀请您查询"+this.order_details[this.share_index].name+"办卡进度",success:function(e){t.showToast({title:"分享成功",icon:"none"})},fail:function(e){i("log","fail:"+JSON.stringify(e)," at pages\\order\\order.vue:451"),t.showToast({title:"分享失败",icon:"none"})}}),this.share=0},touchstart:function(t){this.$refs.sibList.refreshStart(t)},touchmove:function(t){this.$refs.sibList.refreshMove(t)},touchend:function(t){this.$refs.sibList.refreshEnd(t)},isRefresh:function(){},scrolltolowerFn:function(){var e=this;this.page=this.page+1;var r={mode:this.current,type:this.credit_type,q:this.order_q,pageNo:this.page,user_id:this.userInfo.user_id,token:this.userInfo.token,sign:(0,s.default)(this.userInfo.user_id+this.userInfo.token)};this.request.httpRequest("api/apply/index",r,"GET").then((function(r){if(!e.n){t.showLoading({title:"加载中...",mask:!0});var i=r.data.retval;r.data.retval.length<1?(e.n=1,t.showToast({icon:"none",title:"没有消息了"})):(e.n=0,t.showToast({icon:"success",title:"加载成功"})),e.order_details=e.order_details.concat(i),t.hideLoading()}}))}},(0,n.mapMutations)(["toorder"])),onShow:function(){this.credit_current=this.orderTitle},onHide:function(){this.toorder(0)}};e.default=f}).call(this,r("6e42")["default"],r("0de9")["default"])},3791:function(t,e,r){},"50ab":function(t,e,r){"use strict";(function(t){r("cb51"),r("921b");i(r("66fd"));var e=i(r("da51"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("6e42")["createPage"])},c3b2:function(t,e,r){"use strict";var i={"sib-list":function(){return r.e("components/sib-list/sib-list").then(r.bind(null,"8e9d"))},"uni-popup":function(){return r.e("components/uni-popup/uni-popup").then(r.bind(null,"5814"))}},n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.popup=0})},s=[];r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return i}))},cbae:function(t,e,r){"use strict";r.r(e);var i=r("1bef"),n=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},da51:function(t,e,r){"use strict";r.r(e);var i=r("c3b2"),n=r("cbae");for(var s in n)"default"!==s&&function(t){r.d(e,t,(function(){return n[t]}))}(s);r("0bec");var o,a=r("f0c5"),u=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,"1c3ecd54",null,!1,i["a"],o);e["default"]=u.exports}},[["50ab","common/runtime","common/vendor"]]]);